print("hello")
getwd
getwd()
library(ggplot2)
library(plyr)
library(shinydashboard)
library(shiny)
library(dplyr)
library(data.table)
library(DT)
setwd("C:/Users/Francois/Desktop/Fitz/2. Entrepreneurial projects/1. Clinical trials/1. Data")
#Reformat initial dataset
CT=read.csv("CT_clean.csv",na.strings=c("","NA"))
CT$firstreceived_date<-as.Date(CT$firstreceived_date)
CT$completion_date<-as.Date(CT$completion_date)
CT$lastchanged_date<-as.Date(CT$lastchanged_date)
CT$primary_completion_date<-as.Date(CT$primary_completion_date)
CT$start_date<-as.Date(CT$start_date)
#Building Duration variable
CT$Beg_date<-if_else(CT$start_date<CT$firstreceived_date,CT$start_date,CT$firstreceived_date)
CT$End_date<-if_else(is.na(CT$completion_date),CT$primary_completion_date,CT$completion_date)
#CT$Duration<-difftime(CT$End_date ,CT$Beg_date , units = c("days"))
CT$Duration<-as.Date(CT$End_date,format="%Y/%m/%d") - as.Date(CT$Beg_date,format="%Y/%m/%d")
length(CTsimple$Duration)
#Creating a smaller database
CTsimple=CT[which(CT$firstreceived_date >"2008-01-01" & CT$enrollment < 1000000),]
CTsimple=subset(CTsimple, !is.na(enrollment))
CTsimple=subset(CTsimple, !is.na(Duration))
setDT(CTsimple)
runApp('C:/Users/Francois/Desktop/Fitz/2. Entrepreneurial projects/1. Clinical trials/3. Visualisation/CT_dashboard')
